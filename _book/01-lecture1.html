<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1&nbsp; First probability ideas and first steps in R – An Introduction to Probability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-lecture1.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">First probability ideas and first steps in R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">An Introduction to Probability</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-lecture1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">First probability ideas and first steps in R</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#tossing-a-coin" id="toc-tossing-a-coin" class="nav-link active" data-scroll-target="#tossing-a-coin"><span class="header-section-number">1.1</span> Tossing a fair coin: First Probability ideas.</a>
  <ul class="collapse">
  <li><a href="#random-experiments-sample-space-events" id="toc-random-experiments-sample-space-events" class="nav-link" data-scroll-target="#random-experiments-sample-space-events"><span class="header-section-number">1.1.1</span> Random experiments, sample space, events</a></li>
  <li><a href="#the-role-and-nature-of-idealizations-in-applications" id="toc-the-role-and-nature-of-idealizations-in-applications" class="nav-link" data-scroll-target="#the-role-and-nature-of-idealizations-in-applications"><span class="header-section-number">1.1.2</span> The role and nature of idealizations in applications</a></li>
  <li><a href="#classical-probability" id="toc-classical-probability" class="nav-link" data-scroll-target="#classical-probability"><span class="header-section-number">1.1.3</span> Classical Probability: Measuring uncertainty</a></li>
  </ul></li>
  <li><a href="#tossing-coin-on-computer" id="toc-tossing-coin-on-computer" class="nav-link" data-scroll-target="#tossing-coin-on-computer"><span class="header-section-number">1.2</span> Tossing a coin on the computer: First steps in R</a>
  <ul class="collapse">
  <li><a href="#r-interface" id="toc-r-interface" class="nav-link" data-scroll-target="#r-interface"><span class="header-section-number">1.2.1</span> The R User Interface</a></li>
  <li><a href="#objects" id="toc-objects" class="nav-link" data-scroll-target="#objects"><span class="header-section-number">1.2.2</span> Objects</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">1.2.3</span> Functions</a></li>
  <li><a href="#writing_your_own_functions" id="toc-writing_your_own_functions" class="nav-link" data-scroll-target="#writing_your_own_functions"><span class="header-section-number">1.2.4</span> Writing your own functions</a></li>
  <li><a href="#arguments" id="toc-arguments" class="nav-link" data-scroll-target="#arguments"><span class="header-section-number">1.2.5</span> Arguments</a></li>
  <li><a href="#scripts" id="toc-scripts" class="nav-link" data-scroll-target="#scripts"><span class="header-section-number">1.2.6</span> Scripts</a></li>
  <li><a href="#quarto-documents" id="toc-quarto-documents" class="nav-link" data-scroll-target="#quarto-documents"><span class="header-section-number">1.2.7</span> Using Quarto Documents</a></li>
  <li><a href="#packages_help" id="toc-packages_help" class="nav-link" data-scroll-target="#packages_help"><span class="header-section-number">1.2.8</span> Using packages and finding Help</a></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="header-section-number">1.2.9</span> Packages</a></li>
  <li><a href="#getting_help" id="toc-getting_help" class="nav-link" data-scroll-target="#getting_help"><span class="header-section-number">1.2.10</span> Getting Help</a></li>
  </ul></li>
  <li><a href="#coincidences" id="toc-coincidences" class="nav-link" data-scroll-target="#coincidences"><span class="header-section-number">1.3</span> Application: Coincidences and the Blockchain</a>
  <ul class="collapse">
  <li><a href="#birthday_problem" id="toc-birthday_problem" class="nav-link" data-scroll-target="#birthday_problem"><span class="header-section-number">1.3.1</span> The birthday problem</a></li>
  <li><a href="#determining-birthday-collisions-by-simulation" id="toc-determining-birthday-collisions-by-simulation" class="nav-link" data-scroll-target="#determining-birthday-collisions-by-simulation"><span class="header-section-number">1.3.2</span> Determining birthday collisions by simulation</a></li>
  <li><a href="#hashfunctions" id="toc-hashfunctions" class="nav-link" data-scroll-target="#hashfunctions"><span class="header-section-number">1.3.3</span> Hash-functions and the blockchain</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">1.4</span> Summary</a></li>
  <li><a href="#project-designing-transaction-identifyers-for-digital-payment-systems" id="toc-project-designing-transaction-identifyers-for-digital-payment-systems" class="nav-link" data-scroll-target="#project-designing-transaction-identifyers-for-digital-payment-systems"><span class="header-section-number">1.5</span> Project: Designing transaction identifyers for digital payment systems</a>
  <ul class="collapse">
  <li><a href="#introduction-real-world-importance-of-unique-identifiers-in-finance" id="toc-introduction-real-world-importance-of-unique-identifiers-in-finance" class="nav-link" data-scroll-target="#introduction-real-world-importance-of-unique-identifiers-in-finance"><span class="header-section-number">1.5.1</span> Introduction: Real-World Importance of Unique Identifiers in Finance</a></li>
  <li><a href="#simulate-transaction-identifiers" id="toc-simulate-transaction-identifiers" class="nav-link" data-scroll-target="#simulate-transaction-identifiers"><span class="header-section-number">1.5.2</span> Simulate transaction identifiers</a></li>
  <li><a href="#compute-collision-probabilities" id="toc-compute-collision-probabilities" class="nav-link" data-scroll-target="#compute-collision-probabilities"><span class="header-section-number">1.5.3</span> Compute collision probabilities</a></li>
  <li><a href="#visualize-the-results" id="toc-visualize-the-results" class="nav-link" data-scroll-target="#visualize-the-results"><span class="header-section-number">1.5.4</span> Visualize the results</a></li>
  <li><a href="#investigate-the-system-design" id="toc-investigate-the-system-design" class="nav-link" data-scroll-target="#investigate-the-system-design"><span class="header-section-number">1.5.5</span> Investigate the system design</a></li>
  <li><a href="#financial-implications" id="toc-financial-implications" class="nav-link" data-scroll-target="#financial-implications"><span class="header-section-number">1.5.6</span> Financial implications</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="first-steps" class="quarto-section-identifier"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">First probability ideas and first steps in R</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Finance inherently involves uncertainty and risk, making the study of probability essential. At its core, Finance focuses on allocating and pricing money over time, requiring tools to quantify and manage these uncertainties. For example, saving allows you to defer consumption for future purchases, while borrowing enables investment today, with repayment tied to future project revenues. Yet, the future is uncertain and inherently unpredictable.</p>
<p>In Finance, risk and uncertainty are unavoidable. Probability provides the most fundamental framework to quantify, analyze, and manage these challenges. Probability theory equips us with tools to quantify and manage uncertainty, making it a cornerstone of financial decision-making. Every serious Finance student should study probability early in their education.</p>
<p>Probability began as a mathematical theory, gaining practical value through real and conceptual experiments. Its origins trace back to 16th and 17th century Europe, where scholarly debates about gambling engaged some of history’s greatest minds, including Cardano, Pascal, Fermat, and Bernoulli.</p>
<p>Although humans have always been aware of chance—gambling and even venerating a goddess of chance—it was only much later that they considered measuring uncertainty mathematically. This is the starting point for classical probability.</p>
<p>It is also a very good starting point to familiarize ourselves with some basic concepts and knowledge of R by building a simple chance process people apparently had used at all times: Tossing a coin. We will learn how to toss a coin using the computer.</p>
<p>What does tossing a coin have to do with Finance? Consider this thought experiment: Imagine you are deciding to invest in a stock with an equal chance of increasing or decreasing in value. Simulating a coin toss on the computer, where heads and tails have equal chances, provides a simple yet powerful example. It introduces us to probability and R simultaneously. By linking this example to a financial scenario—such as a stock investment—we also begin connecting probability and R to computational Finance.</p>
<section id="tossing-a-coin" class="level2 page-columns page-full" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="tossing-a-coin"><span class="header-section-number">1.1</span> Tossing a fair coin: First Probability ideas.</h2>
<p>Lets start with a classic and basic example of a probability model: Tossing a fair coin. When probability theorists talk of a fair coin they mean that the coin has equal chances of coming up heads as coming up tails. When the coin is tossed it is uncertain whether it will ultimately come up Heads or Tails.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-coin-toss" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-coin-toss-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/fair_coin_toss.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:25.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-coin-toss-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.1: Figure 1: Tossing a coin
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-coin-toss" class="quarto-xref">Figure&nbsp;<span>1.1</span></a> visualizes such a process.</p>
<section id="random-experiments-sample-space-events" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="random-experiments-sample-space-events"><span class="header-section-number">1.1.1</span> Random experiments, sample space, events</h3>
<p>In the theory of probability a process leading to an uncertain outcome is called a <strong>random experiment</strong>. The example of tossing a coin helps us to give a precise meaning to the notion of an uncertain outcome. While we can imagine in principle that the coin lands on its rim and this is one outcome, we agree <em>on the outset</em> that we are going to consider the (practically relevant cases) that it will land on one of the faces.</p>
<p>The collection of all possible outcomes of a practical or conceptual random experiment is called in probability theory a <strong>sample space</strong>. While the sample space of tossing a coin is an idealization it is exactly this idealization which simplifies the theory without affecting its applicability. The <strong>basic outcomes</strong> in the random experiment of tossing a coin are that the die lands such that the upward showing face shows Heads or Tails. Let us encode this outcome by 1 for “Heads” and 0 for “Tails”. In the theory the collection of basic outcomes is denoted as a set. Thus the sample space of tossing a coin is given as the set <span class="math inline">\({\cal S} = \{1,0\}\)</span>.</p>
<p>The sample space <span class="math inline">\({\cal S}\)</span> is the set of all basic outcomes, which are in our case only two: 1 or 0.</p>
<p>In more complex random experiments there will usually be more than two outcomes. Subsets of the sample space containing more than one basic outcome are called <strong>events</strong> in the theory of probability.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Now you try
</div>
</div>
<div class="callout-body-container callout-body">
<p>Consider another random experiment from games of chance: Throwing a six sided die. What are the basic outcomes in this random experiment? What is the sample space in this case? How would you describe the event that the outcome of the die shows an odd number in terms of a subset of the sample space? Consider yet a new random experiment where you throw two coins, instead of one. What are the basic outcomes in this random experiment? What is the sample space in this case? How do these concepts look like when you throw two six sided dice instead of two coins?</p>
</div>
</div>
</section>
<section id="the-role-and-nature-of-idealizations-in-applications" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="the-role-and-nature-of-idealizations-in-applications"><span class="header-section-number">1.1.2</span> The role and nature of idealizations in applications</h3>
<p>Idealizations of the kind we discussed for the toss of a coin are standard in probability and we will encounter them again and again. For example the movement of a stock price is often though of as a conceptual random experiment. When we try to agree on what is the appropriate sample space of this experiment, we can say that the price can not fall below 0 but it is hard to agree on what will be the highest possible price. In the probabilistic treatment of stock prices, which we will discuss later in our course, it is for instance common to assume that the sample space of this random experiment is the entire interval of non-negative real numbers <span class="math inline">\({\cal S} = [0, \infty)\)</span>.</p>
<p>Many of us would hesitate to claim that the price might rise without bound. Yet many models in applied Finance are based on such an assumption. The models allow arbitrary price hikes but with arbitrary small probability as the price gets higher and higher. Practically it does not make sense to believe that a security price can become arbitrarily high. The use of arbitrarily small probabilities in a financial model might seem absurd but it does no practical harm and makes the model simple and convenient to use. Moreover, if we seriously introduced an upper bound on a security price at <span class="math inline">\(x\)</span> it would be also awkward to assume that it is impossible that it could be just a cent higher, an assumption equally unappealing than assuming it can get in principle arbitrarily high.</p>
</section>
<section id="classical-probability" class="level3 page-columns page-full" data-number="1.1.3">
<h3 data-number="1.1.3" class="anchored" data-anchor-id="classical-probability"><span class="header-section-number">1.1.3</span> Classical Probability: Measuring uncertainty</h3>
<p><strong>Probability</strong> is a measure of how likely an event of an experiment is. But how could we measure chance? Here is the first big idea of probability theory and how the originators thought about it.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> How do you measure anything? If you think of length, for example, you take an arbitrary standard you agree on and then count. The originators of probability theory pursued the same idea with chance: To measure probability you choose equally probable cases and then count.</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;In this discussion I use chapter 1 in <span class="citation" data-cites="DiaconisSkyrms2019">Diaconis and Skyrms (<a href="#ref-DiaconisSkyrms2019" role="doc-biblioref">2019</a>)</span></p></div></div><p>The probability of an event <span class="math inline">\(A\)</span> according to the originators of the theory of probability is then <span class="math display">\[\begin{equation}
P(A) = \frac{\text{Number of cases where $A$ occurs}}{\text{Total number of cases}}
\end{equation}\]</span></p>
<p>Thus, if we want to know the probability of the coin ending up Heads, we have to compute according to this notion <span class="math inline">\(1/2\)</span>, since the total number of cases is 2 (Heads or Tails).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Now you try
</div>
</div>
<div class="callout-body-container callout-body">
<p>Consider another random experiment of throwing a six sided die: According to the probability notion explained above what would be the chance that the die lands on on a face such that an even number is shown?. What would be the chance that in the random experiment of throwing two dice the sum of points would be 7? What is the chance that when rolling two six sided dice the sum is 2?</p>
</div>
</div>
<p>Note that this classical notion of probability has a few interesting consequences, which we will discuss in more detail later but which already now naturally flow from this basic idea of measuring chance.</p>
<ol type="1">
<li>Probability is never negative.</li>
<li>If an event <span class="math inline">\(A\)</span> occurs in all cases <span class="math inline">\(P(A)=1\)</span>.</li>
<li>If <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> never occur in the same case, then <span class="math inline">\(P(A \,\text{or}\, B) = P(A) + P(B)\)</span>.</li>
</ol>
<p>While rule 1. and 2. are intuitively fairly obvious (try to think of examples to convince yourself!), rule 3 might need some concrete explanation. The case described by rule 3 is often referred to as <strong>mutually exclusive</strong> events, i.e. they can not occur together.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example for rule 3:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Suppose you have a standard deck of 52 playing cards, and you are interested in the probability of drawing a King <span class="math inline">\(A\)</span> or a Queen <span class="math inline">\(B\)</span>.</p>
<ul>
<li>The probability of drawing a King is <span class="math inline">\(P(A) = \frac{4}{52}\)</span>, since there are 4 Kings in the deck.</li>
<li>The probability of drawing a Queen is <span class="math inline">\(P(B) = \frac{4}{52}\)</span>, since there are also 4 Queens.</li>
</ul>
<p>Since a card cannot be both a King and a Queen, <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> are mutually exclusive events.</p>
<p>Thus, the probability of drawing a King <strong>or</strong> a Queen is: <span class="math inline">\(P(A \,\text{or}\, B) = P(A) + P(B) = \frac{4}{52} + \frac{4}{52} = \frac{8}{52} = \frac{2}{13}\)</span></p>
<p>This illustrates how probabilities of mutually exclusive events add up.</p>
</div>
</div>
<p>In particular then the probability that an event does <em>not</em> occur is 1 less the probability that it occurs: <span class="math inline">\(P(\text{not}\, A) = 1 - P(A)\)</span>.</p>
<p>Now let me show you how you can make use of a large language model, using ChatGPT as a use case, to support learning new concepts such as we have just introduced them here.</p>
<p>We have discussed new two classical and famous random experiments you will probably find in every textbook on probability. Assume you would like to deepen your understanding of these concepts and also consider more complex examples in particular from Finance. This is something the LLM is very good at. You could - for instance - ask ChatGPT at the prompt something like shown in <a href="#fig-Promptgpt" class="quarto-xref">Figure&nbsp;<span>1.2</span></a> :</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-Promptgpt" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-Promptgpt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/prompt_gpt_example.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-Promptgpt-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.2: Figure 2: The ChatGPT prompt
</figcaption>
</figure>
</div>
</div>
</div>
<p>Here is an answer I would get for this prompt:</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer by ChatGPT40
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here are three detailed examples from finance to illustrate the concepts of a <strong>random experiment</strong>, <strong>sample space</strong>, <strong>basic outcomes</strong>, and <strong>events</strong>:</p>
<hr>
<p><strong>Example 1: Daily Price Movement of a Stock</strong></p>
<p><strong>Random Experiment:</strong> Observe the daily price movement of a particular stock (e.g., Apple Inc.) at the close of the trading day.</p>
<ul>
<li><p><strong>Sample Space <span class="math inline">\({\cal S}\)</span>:</strong> The set of all possible outcomes of the price movement. For simplicity, we can represent the sample space as: <span class="math inline">\({\cal S} = \{ \text{price increase, price decrease, no change} \}\)</span></p></li>
<li><p><strong>Basic Outcomes:</strong></p>
<ul>
<li>“Price increases” (e.g., the stock closes higher than it opened).</li>
<li>“Price decreases” (e.g., the stock closes lower than it opened).</li>
<li>“No change” (e.g., the stock closes at the same price it opened).</li>
</ul></li>
<li><p><strong>Events:</strong></p>
<ul>
<li>Event <span class="math inline">\(A\)</span>: “The stock price increases.” <span class="math inline">\(\{ \text{price increase} \}\)</span></li>
<li>Event <span class="math inline">\(B\)</span>: “The stock price either increases or remains unchanged.” <span class="math inline">\(\{ \text{price increase, no change} \}\)</span></li>
</ul></li>
</ul>
<hr>
<p><strong>Example 2: Credit Card Default Risk</strong></p>
<p><strong>Random Experiment:</strong> Assess whether a randomly selected credit card holder defaults on their monthly payment.</p>
<ul>
<li><p><strong>Sample Space <span class="math inline">\({\cal S}\)</span>:</strong></p>
<p><span class="math inline">\(S = \{\text{default, no default} \}\)</span></p></li>
<li><p><strong>Basic Outcomes:</strong></p>
<ul>
<li>“Default” (e.g., the cardholder fails to make the minimum payment).</li>
<li>“No default” (e.g., the cardholder pays at least the minimum required).</li>
</ul></li>
<li><p><strong>Events:</strong></p>
<ul>
<li>Event <span class="math inline">\(A\)</span>: “The cardholder defaults.” ({default})</li>
<li>Event <span class="math inline">\(B\)</span>: “The cardholder does not default.” ({no default})</li>
<li>Event <span class="math inline">\(C\)</span>: “Default occurs for a customer from a specific demographic (e.g., under 30 years old).” This is a subset of the sample space but is conditioned on additional information.</li>
</ul></li>
</ul>
<hr>
<p><strong>Example 3: Bond Ratings Transition</strong></p>
<p><strong>Random Experiment:</strong> Observe the change in the credit rating of a corporate bond over a year.</p>
<ul>
<li><p><strong>Sample Space <span class="math inline">\({\cal S}\)</span>:</strong> The set of possible credit rating transitions. For example, using a simple rating scale: <span class="math inline">\({\cal S} = \{\text{AAA}, \text{AA}, \text{A}, \text{BBB}, \text{BB}, \text{B}, \text{CCC}, \text{default} \}\)</span></p>
<p>Over a year, the bond can transition from its initial rating to any of these, or stay the same.</p></li>
<li><p><strong>Basic Outcomes:</strong></p>
<ul>
<li>“AAA to AAA” (no change in the highest credit quality).</li>
<li>“BBB to BB” (downgrade).</li>
<li>“A to default” (significant deterioration).</li>
</ul></li>
<li><p><strong>Events:</strong></p>
<ul>
<li>Event <span class="math inline">\(A\)</span>: “The bond is downgraded by one or more notches.” (Any outcome where the final rating is lower than the initial rating, e.g., {AAA to AA, A to BB}).</li>
<li>Event <span class="math inline">\(B\)</span>: “The bond defaults.” ({default}).</li>
<li>Event <span class="math inline">\(C\)</span>: “The bond remains investment-grade.” (All transitions where the final rating is AAA, AA, A, or BBB).</li>
</ul></li>
</ul>
<hr>
<p>These examples show how the concepts apply to finance, helping to bridge the theoretical framework of probability with practical applications in the field. Would you like to dive deeper into any of these examples or extend them to computations like probabilities of events?</p>
</div>
</div>
<p>Let us interrupt here our discussion of probability for a moment and ask how we can make good on our promise to make these ideas tangible, so we can play with them.</p>
<p>For this we will need the computer. Since we will talk to the computer in R, it is now the right time to look at the die rolling example from the perspective of R and dive into some of its basic concepts.</p>
</section>
</section>
<section id="tossing-coin-on-computer" class="level2 page-columns page-full" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="tossing-coin-on-computer"><span class="header-section-number">1.2</span> Tossing a coin on the computer: First steps in R</h2>
<section id="r-interface" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="r-interface"><span class="header-section-number">1.2.1</span> The R User Interface</h3>
<p>Before we can ask our tool to do anything for us, we need to know how to talk to it. In our case RStudio allows us to talk to our computer. It works like any other application. When you launch RStudio on your computer, in figure <a href="#fig-rstudio-start-screen" class="quarto-xref">Figure&nbsp;<span>1.3</span></a> you see a screen looking like this:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-rstudio-start-screen" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rstudio-start-screen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/Screenshot_RStudio.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rstudio-start-screen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.3: The RStudio startup screen
</figcaption>
</figure>
</div>
</div>
</div>
<p>In this picture you see a screenshot of my RStudio screen. Interacting with the app is easy. You type commands via your keyboard at the <strong>prompt</strong>, which is the <code>&gt;</code> symbol. You find this symbol in the RStudio pane called <strong>Console</strong>. You can see it in the left pane in the screenshot. You send the command to the computer by pressing enter. After you have pressed enter, RStudio sends the command to R and displays the result of your command with a new prompt to enter new commands, like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">+</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>Let me pause to explain what you see here in this code example. First you see a light-gray box containing the command <code>1+1</code>. This is an instance of a so called <strong>code chunk</strong>. Moving the cursor to the right upper corner of the chunk, will display a copy icon and you can click this icon to copy the code to the computer’s clipboard and then paste it at the prompt of your console (or for that matter anywhere else) and run it in R studio, if you wish. In the code-chunk the R-prompt <code>&gt;</code> is not displayed. This symbol of the prompt is only shown in the Console itself.</p>
<p>The <code>[1]</code> means that the line begins with the first value of your result. For example, if you enter the command <code>20:60</code> at the prompt of your console which means in the R language, “list all the integers from 20 to 60” and press enter you get:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span><span class="sc">:</span><span class="dv">60</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44
[26] 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60</code></pre>
</div>
</div>
<p>meaning that 20 is the first value displayed in your result. Then there is a line break because not all values can be displayed on the same line and R tells you that <code>45</code> is the 26-th value of the result.</p>
<p>The colon operator <code>:</code> is a very useful function in R which we will need often. It allows us to create sequences of every integer between two given integers.</p>
<p>R needs a complete command to be able to execute it, when the return key is pressed. Lets see what happens, if a command is incomplete, like for instance <code>&gt; 5*</code>.</p>
<p>In this case R will show the expression followed by a <code>+</code> instead of showing a new prompt. This means that the expression is incomplete. It expects more input. If we complete the expression, say like</p>
<pre><code>&gt; 5*
+ 4</code></pre>
<p>the expression can be evaluated and a new prompt is shown in the console.</p>
<p>If you type a command that R does not understand, you will be returned an error message. Don’t worry if you see an error message. It just is a way the computer tells you that he does not understand what you want him to do.</p>
<p>For instance, if you type <code>5%3</code> you will get an error message like this</p>
<pre><code>&gt; 5%3
Error: unexpected input in "5%3"
&gt;</code></pre>
<p>Sometimes it is obvious why a mistake occurred. In this case, that R just does not know what to do with the symbol <code>%</code>. It has no meaning in this context. Sometimes it is not so obvious what the error message actually means and what you might do about it.</p>
<p>A useful strategy in this case is to type the error message into a search engine and see what you can find. The chance is very high that others encountered the same problem before you and got helpful advice how to fix it from other users on the internet. One site, we find particularly helpful for all kinds of questions related to R and R programming is https://stackoverflow.com/. Try it at the next opportunity. You can also show the error to the LLM prompt and ask how to fix it. In most cases chatGPT will give you a useful answer.</p>
<p>Now with this basic knowledge, we can already make the first step to create a coin on the computer using R. If you think of a physical coin, the essential thing that matters is that it can show Heads or Tails. Lets encode Heads by 1 and Tails by 0. If you toss the coin it will usually land on one of these faces and the upward showing side of the coin shows the outcome of the toss. The colon operator <code>:</code> gives us a way to create a group of numbers from 0 to 1. R gives us the result as a one dimensional set of numbers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">:</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 1</code></pre>
</div>
</div>
<p>Lets use these first steps in R to recap the probability concepts we have learned using this example of the six sided die: A <em>basic outcome</em> of tossing the coin is for example <code>1</code> if the upper side after tossing the coin happens to be Heads. The <em>sample space</em> of the experiment of tossing a coin is the set <span class="math inline">\({\cal S} = \{0,1\}\)</span>. In probability theory we often use the symbol <span class="math inline">\({\cal S}\)</span> or <span class="math inline">\(S\)</span> for sample space. In many probability texts the sample space is also often denoted by the symbol <span class="math inline">\(\Omega\)</span> the Greek letter for (big) Omega. A <em>random experiment</em> in this example is the tossing of the coin. The outcome is uncertain but once the coin is tossed the outcome can be determined precisely. The event that the outcome is a display of 2 is the empty set <span class="math inline">\(A = \emptyset\)</span>. The symbol <span class="math inline">\(\emptyset\)</span> comes from set theory and means the set containing no elements. This event can contain no elements because we can not get any other number than 0 or 1 by tossing the coin.</p>
</section>
<section id="objects" class="level3 page-columns page-full" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="objects"><span class="header-section-number">1.2.2</span> Objects</h3>
<p>You can save data in R by storing them in <strong>objects</strong>. An object is a name, you can choose yourself to store data. For example, if you choose to store the value <code>1</code> in an object called <code>Heads</code>, you would type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Heads <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>at the prompt. R will the store the value 1 in the object called <code>Heads</code>, which you can use to refer to the value. If you type the name of your object at the prompt, R will display the value you have assigned. A useful key combination for typing the assignment operator <code>&lt;-</code> is to use the key combination <code>ALT _</code>. At the R prompt R will automatically print an assignment operator.</p>
<p>Now if you type the name of the object and press enter, R will display the value or values stored in it, like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Heads</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>Now you can use the name of the object to refer to its value. For instance, you could divide <code>Heads</code> by <code>2</code> and get a meaningful result</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Heads<span class="sc">/</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5</code></pre>
</div>
</div>
<p>Now to make our <code>coin</code> more tangible and useful, let us store it in an R object by typing the following command at the prompt. This command creates an object with name <code>coin</code> and assigns the vector <code>0,1</code> to it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>coin <span class="ot">&lt;-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-rstudio-screen-with-command" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rstudio-screen-with-command-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/screenwithobject.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rstudio-screen-with-command-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.4: The RStudio Environment pane keeps track of the objects you have created
</figcaption>
</figure>
</div>
</div>
</div>
<p>You can now see in the right upper Environment pane in figure <a href="#fig-rstudio-screen-with-command" class="quarto-xref">Figure&nbsp;<span>1.4</span></a> that R shows you that there is an object with the name <code>coin</code> that it consists of integers <code>0,1</code>. As you create more objects they will be stored in the Environment pane and are ready for your reference, unless you delete them. You can remove or delete an object by typing <code>rm(object)</code> or by assigning the value <code>coin &lt;- NULL</code> which would also remove the object from your environment or workspace.</p>
<p>You can name your objects almost anything with a few exceptions. An object name must not start with a number. There are some special symbols which can also not be used in object names, like <code>^, !, $, @, +, -, /, *</code>. Note that R is case sensitive and distinguishes small and big letters. If you assign a new value for an object you have already created, R will overwrite the object without warning.</p>
<p>You can see which objects are currently created and available for you in the Environment pane of your session of by typing <code>ls()</code>. The UNIX users among you will recognize this command from the unix shell, where it displays the files in a directory.</p>
<p>Before we learn how we can actually roll our die and perform a random experiment with it, let us briefly use the opportunity to explain a few things about how R does computations. We have already explained that we can use the object name to refer to the value. So for instance if we type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">*</span>coin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 1</code></pre>
</div>
</div>
<p>This might irritate some of you because we have called the object a vector. In linear algebra multiplication of vectors is only allowed if there is an inner product. What happens here, if we use <code>*</code> the multiplication operator is that R does an element-wise multiplication of the six numbers of our die. Of course R allows to take an inner product as well, but this needs a different operator. To compute an inner product, we would type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>coin <span class="sc">%*%</span> coin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]
[1,]    1</code></pre>
</div>
</div>
<p>Now R displays the result as a vectors with one row and one column, which is denoted in the output by <code>[ , 1]</code> for the column and <code>[1, ]</code> for the row. We will learn later more about the use and the meaning of this notation in R.</p>
<p>The element wise execution R usually uses also means that when you, for example type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>coin <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2</code></pre>
</div>
</div>
<p>R would subtract <code>1</code> from every component in the vector <code>coin</code>.</p>
<p>Another specific behavior of R, you need to know about is called <strong>recycling</strong>. If you give R two vectors of different length in an operation, R will repeat the shorter vector as long as it is of equal length with the longer one. For example, if you have:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>coin <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2</code></pre>
</div>
</div>
<p>you see that R adds 1 to 0 and then starts over again by adding 1 to 1.</p>
<p>If the longer vectors is not a multiple of the shorter one, R recycles but the cuts off.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;As of R version 4.2.0 (released in April 2022), the behavior regarding the recycling rule has changed. In older versions of R, a warning was issued when the length of one vector was not a multiple of the length of the other vector during arithmetic operations. The reasoning behind this change was to reduce unnecessary noise in the output. Many users found the warnings redundant in cases where the recycling rule was intentional and understood. However, this change means you need to be more cautious, as unexpected behavior might go unnoticed without the warning.</p></div></div><div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>coin <span class="sc">+</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 3 5</code></pre>
</div>
</div>
<p>While this might seem awkward to some of you, we will see that for data manipulation element-wise execution is often extremely useful. It allows to manipulate groups of values in a systematic yet easy way.</p>
</section>
<section id="functions" class="level3" data-number="1.2.3">
<h3 data-number="1.2.3" class="anchored" data-anchor-id="functions"><span class="header-section-number">1.2.3</span> Functions</h3>
<p>R contains many <strong>functions</strong> which we can use to manipulate data and compute things. The syntax for using a function is very simple: You type the function name and put the value of the function <strong>argument</strong> in parentheses. Here we use for illustrations the function of the square root <code>sqrt()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>or rounding a number:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">3.1415</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>The data you write in the parentheses are called the <strong>function arguments</strong>. Arguments can be all sorts of things: raw data, R objects, results from other functions.</p>
<p>If functions are nested, R evaluates the innermost function first and then goes on to the outer functions. To see examples of all these instances you can take</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(numbers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>for example.</p>
<p>For simulating random experiments, R has the very useful function <code>sample()</code>. With this function we can - for example - toss a coin on the computer and conduct actual random experiments.</p>
<p>The function takes as arguments a vector names <code>x</code> and a number named <code>size</code>. <code>sample</code> will return <code>size</code> elements randomly chosen from the vector <code>x</code>. Lets say:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>In this case <code>sample</code> has chosen either 0 or 1 from the vector <code>x = (0,1)</code> at random.</p>
<p>If we want to toss the coin in our computer we can thus pass the coin as an argument to <code>sample</code> and use the number <code>1</code> for the <code>size</code> argument. Lets do a few tosses with our die</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="at">x =</span> coin, <span class="at">size =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="at">x =</span> coin, <span class="at">size =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="at">x =</span> coin, <span class="at">size =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="at">x =</span> coin, <span class="at">size =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>These are the random outcomes of our consecutive tosses. It is as if we had thrown an actual coin but in this case we have done the same thing on the computer. Isn’t it cool that this is possible at all? The <code>sample()</code> function will remain our good friend throughout this course.</p>
<p>R functions can have many arguments, but they need to be separated by a comma.</p>
<p>Every argument in every function has a name. We specify which data are assigned to the arguments by setting a mathematical equal sign <code>=</code> between the name and the data. Names help us to avoid passing the wrong data and thereby mixing up things or committing errors. But using names is not necessary. If we just wrote</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(coin,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>R would also know what to do. It is not always clear which names to use for a function. If you are not sure, you can use the function <code>args()</code> to look it up. Here we take the function <code>round</code>as one example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">args</span>(round)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (x, digits = 0, ...) 
NULL</code></pre>
</div>
</div>
<p>Note that the <code>digits</code> argument in the <code>round</code> function is already set to <code>0</code>. Frequently R functions come with optional arguments. These arguments are optional because the come with a default value, which is <code>0</code> in case of the round function.</p>
<p>We recommend that you write out argument names as a rule. It gives clearer code and avoids errors. If you don’t write argument names, R matches your values to the arguments of the function by order.</p>
</section>
<section id="writing_your_own_functions" class="level3" data-number="1.2.4">
<h3 data-number="1.2.4" class="anchored" data-anchor-id="writing_your_own_functions"><span class="header-section-number">1.2.4</span> Writing your own functions</h3>
<p>Now we are ready to write our own function to toss the coin in our computer. Each function in R has the same elements: A <strong>name</strong>, a <strong>function body</strong> of code and a set of <strong>arguments</strong>. To write your own function, you have to write up all of these parts and save them in an R object. The syntax is:</p>
<pre><code>my_function &lt;- function() {}
</code></pre>
<p>The name here is <code>my_function</code>, next comes the expression <code>function()</code> which needs to be assigned. The names of the function arguments have to be written between the parentheses. Then we have to write the actual code within the braces <code>{}</code>.</p>
<p>To do this for the die, lets write a function named <code>toss_coin</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>toss_coin <span class="ot">&lt;-</span> <span class="cf">function</span>(){coin <span class="ot">&lt;-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">sample</span>(coin, <span class="at">size =</span> <span class="dv">1</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can toss our coin for a few times to show how the function works</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toss_coin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toss_coin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toss_coin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toss_coin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toss_coin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>Note that in our function <code>toss_coin()</code> has no arguments, just the function body. This is perfectly legitimate in R. It is important that when we call the function we have to call it with the parenthesis like <code>toss_coin()</code>. If we only call the name <code>toss_coin</code>, R will display the code in the function body.</p>
<p>A final remark in the <code>sample</code> function is in place here. If we look at the arguments of sample using the <code>args</code> function we see</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">args</span>(sample)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (x, size, replace = FALSE, prob = NULL) 
NULL</code></pre>
</div>
</div>
<p>Lets do not discuss all the details of this output but concentrate for a moment on the <code>replace</code> argument. What does this mean?</p>
<p>As we saw previously we can use the sample function to model the rolling of our die. If we set the <code>size</code> argument to <code>1</code> we get the toss of one coin. If we set the <code>size</code> argument to <code>n</code>, we would simulate the tossing of <code>n</code> coins. But now the <code>replace</code> argument becomes crucial. As we can see in the output of the <code>args</code> function <code>replace</code> has a default value <code>FALSE</code>. This is a logical argument. It tells R, for example, that if we set <code>size = 2</code>, meaning that two coins are tossed, if the first coin shows, say Heads - a value of 1- the coin die cannot show Heads as well.</p>
<p>This is clearly not what we have in mind when we model the tossing of two coins. It should be possible that both coins show the same value. To enable this behavior of the sample function, we have to change the default value of the <code>replace</code> argument to <code>TRUE</code>. Then R chooses a random draw from all of the six possible values for all dice rolled.</p>
<p>Congratulations ! You have written your first R function for conducting a simple random experiment. Let me remind you once again: Think of the parentheses as a trigger that tells R to run the function. If you omit the trigger R just prints the body of the function. When you run a function, all the code in the function body is executed and R returns the result of the last line of code. If the last line of code does not return a value neither will R.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Now you try
</div>
</div>
<div class="callout-body-container callout-body">
<p>Consider another random experiment of throwing a six sided die. Use the concepts learned in this section to write a function which simulates the rolling of a six sided die. Write a function to simulate the throwing of two dice. Think about how to set the <code>replace</code> argument in the sample function in this case. Use R’s help function to learn about the role of the <code>replace</code> argument. Alternatively ask the LLM to explain the use of <code>replace</code> in R’s sample function. You can also ask for examples or demonstrations what goes wrong when this argument is parametrized in the wrong way.</p>
</div>
</div>
</section>
<section id="arguments" class="level3" data-number="1.2.5">
<h3 data-number="1.2.5" class="anchored" data-anchor-id="arguments"><span class="header-section-number">1.2.5</span> Arguments</h3>
<p>Imagine we remove the first line of code in our function body and changed the name die in the sample function to “ball”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>toss_coin2 <span class="ot">&lt;-</span> <span class="cf">function</span>(){<span class="fu">sample</span>(ball, <span class="at">size =</span> <span class="dv">1</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we call the function now, we will get an error. The function call <code>roll_die2()</code> will result in the error message <code>Error in sample(ball, size = 1) : object 'ball' not found</code> (try it!)</p>
<p>We could supply ball when we call <code>toss_coin2</code> if we make ball an argument of the function. Lets do this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>toss_coin2 <span class="ot">&lt;-</span> <span class="cf">function</span>(ball){<span class="fu">sample</span>(ball, <span class="at">size =</span> <span class="dv">1</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now the function will work as long as we supply <code>ball</code> when we call the function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toss_coin2</span>(<span class="at">ball =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>Note that we still get an error, if we forget to supply ball argument. This could be avoided if we give the function a default argument</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>toss_coin2 <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">ball=</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>){<span class="fu">sample</span>(ball, <span class="at">size =</span> <span class="dv">1</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now if we type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toss_coin2</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>everything works, just as intended.</p>
</section>
<section id="scripts" class="level3" data-number="1.2.6">
<h3 data-number="1.2.6" class="anchored" data-anchor-id="scripts"><span class="header-section-number">1.2.6</span> Scripts</h3>
<p>So far we have worked by interacting with the console. But what if you want to edit your functions? It would be much easier, if you could use a draft of your code and work form there. This can be done by using a <strong>script</strong>.</p>
<p>You create a script by going to <code>File &gt; New File &gt; R script</code> in the menu bar of RStudio. Using scripts is the standard way to write code in R. It not only helps you to keep track of your code, save it and edit it later. It also makes your work <em>reproducible</em>. You can edit and proofread your code and share it with others. To save your script go to <code>File &gt; Save As</code> in the menu bar.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/scriptscreen.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption>The RStudio Script</figcaption>
</figure>
</div>
</div>
</div>
<p>RStudio has many useful features to help you work with scripts. You can for instance automatically execute a line in a code by using the run button. You can also execute sections of code or the entire script. The entire script is executed by running the Source button. For all these commands there are key short cuts which you will learn as you work more with RStudio and R.</p>
<p>From now on you should write all your R-code for this course in scripts. Make a new folder for the scripts you write and store your R-code there from now on.</p>
</section>
<section id="quarto-documents" class="level3" data-number="1.2.7">
<h3 data-number="1.2.7" class="anchored" data-anchor-id="quarto-documents"><span class="header-section-number">1.2.7</span> Using Quarto Documents</h3>
<p>Quarto documents provide an elegant way to combine explanatory text, R code, and the resulting output in one cohesive file. This makes them especially useful for documenting your learning process, conducting reproducible research, or preparing assignments.</p>
<p>Let’s walk through how to use a Quarto document to write down and experiment with your coin-tossing function.</p>
<ol type="1">
<li><strong>Creating a New Quarto Document</strong>: To begin, create a new Quarto document in RStudio by navigating to <code>File &gt; New File &gt; Quarto Document...</code>. You will see a popup window allowing you to type a title for the document and your name. It also allows you to select a format for your document. Choose the <code>HTML</code> format for now, as it allows easy preview in your browser, and click the <code>Create</code> button The popup window will look something like this:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/quarto_pop_up.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption>The quarto pop up window</figcaption>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li><strong>Understanding the Quarto Layout</strong>: The new Quarto document will have a YAML header at the top, which might look like this:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/quarto_yaml.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption>The quarto yaml header</figcaption>
</figure>
</div>
</div>
</div>
<p>Below this header, you will see some example text and R code chunks. Replace the example content with your own text and code.</p>
<ol start="3" type="1">
<li><p><strong>Adding the Coin Tossing Function</strong>: In your Quarto document, you can explain your approach to creating the coin-tossing function, and include the code in a code chunk.</p>
<p>Here’s an example:</p></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/first_quarto_steps.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption>Combining text and code in quarto documents</figcaption>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li><p><strong>Running and Compiling the Document</strong>: Once you have written your text and code, save your document. You can execute the R code directly within the Quarto document. To run a code chunk, click the green play button in the upper-right corner of the chunk or use the shortcut <code>Ctrl + Shift + Enter</code> (Windows) or <code>Cmd + Shift + Enter</code> (Mac).</p>
<p>After executing your code, you can compile the document into a readable output format by clicking the <code>Render</code> button or using the shortcut <code>Ctrl + Shift + K</code> (Windows) or <code>Cmd + Shift + K</code> (Mac).</p></li>
</ol>
<p>There is of course a lot you can do to enhance your quarto documents. For example the lecture notes you are reading now are all written and composed in quarto as are the lecture slides.</p>
<p>By using Quarto documents, you can create well-documented, interactive code files that are both functional and easy to share with others. You can use quarto indpendently from R and combine it with other languages like phyton or julia. Ceck out: https://quarto.org/</p>
</section>
<section id="packages_help" class="level3" data-number="1.2.8">
<h3 data-number="1.2.8" class="anchored" data-anchor-id="packages_help"><span class="header-section-number">1.2.8</span> Using packages and finding Help</h3>
<p>We have now a function which we can use to simulate the tossing of a coin, <code>coin_toss()</code>. If the coin is <em>fair</em> it should be the case that if we toss the coin often, Heads and Tails should occur about equally often. The coin should not be weighted in favor of a particular value.</p>
<p>One way to learn whether our coin is fair are <em>repetition</em> and <em>visualization</em>. These are tools we will need all the time, when working with data and when doing probability. While R has many useful functions, one of the great powers is that R is constantly extended by a huge community of users by providing packages.</p>
<p>Packages are add on functions, which will not be available when you install R. They need to be installed and loaded before you can use them. Since packages are such a powerful tool in R we need to introduce what they are and how to use them in the beginning.</p>
</section>
<section id="packages" class="level3 page-columns page-full" data-number="1.2.9">
<h3 data-number="1.2.9" class="anchored" data-anchor-id="packages"><span class="header-section-number">1.2.9</span> Packages</h3>
<p>There are many visualization tools in R that come with the basic installation. Since the point we want to make here is about packages, we will use a visualization function which is part of the add on package <strong>ggplot2</strong>, a very popular package for making all kinds of graphs. ggplot2 is not part of the base-R distribution. It has to be therefore loaded before we can use it.</p>
<p>There are many additional functions provided with this package. Indeed you could run a whole course on just that <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn3"><p><sup>3</sup>&nbsp;A very good starting point is for instance <span class="citation" data-cites="Healy2018">Healy (<a href="#ref-Healy2018" role="doc-biblioref">2019</a>)</span>, in case you are interested. Also a good source is the first chapter in <span class="citation" data-cites="WickhamGrolemund2017">Wickham and Grolemund (<a href="#ref-WickhamGrolemund2017" role="doc-biblioref">2017</a>)</span>.</p></div></div><p>Since we want to use functios now which are not in the base R distribution. we need to load the package which provides the functions we want. In this example we use the package <em>ggplot2</em>.</p>
<p>When we use a package for the first time it needs to be installed. Once installed it does not have to be reinstalled when we use it at later coding sessions again.</p>
<p>To install a package you need to be connected to the internet. If you have internet connection go to the command line and run at the command line: <code>install.packages("ggplot2")</code>.</p>
<p>R displays what is happening while executing the command. Don’t worry if you don not know what all of these messages exactly mean and don’t panic that they are displayed in red. All packages can be installed like this. You have just to enter the correct name in the function <code>install.packages()</code>. The lower right pane in the RStudio software alternatively provides a tab called <strong>Packages</strong>. Using this tab, you can also install R packages interactively by clicking the install button on the upper left corner of the Packages tab.</p>
<p>After installation the package is on our hard-drive but it can not yet be used. To use the package it has to be loaded. This is done with the command <code>library</code>. To load the <em>ggplot2</em> package we type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and hit the return key. Many things could be said about the R package system and you will learn it in more detail as we go along in our course. For the moment the most important thing to remember is that a package needs to be newly loaded whenever you want to use it in a new R session.</p>
<p>To check whether our coin is fair, we need to toss it many times. R provides a function, that does this for us. This function is called <code>replicate()</code> and provides an easy way to repeat a command many times. The number of times we want to repeat something is given as an argument to the <code>replicate</code> function.</p>
<p>Now lets roll our die 100 times and save the result in an object we call <code>tosses</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>tosses <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="dv">100</span>, <span class="fu">toss_coin</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The function <code>set.seed()</code> I used here with the argument <code>123</code> is just a device to make this experiment reproduceable. If this function is not used, each new run of the 100 replications would show a different outcome.</p>
<p>I now show you a code for visualizing this outcome. The code contains some concepts that we did not yet discuss. Don’t worry. We will learn them soon. The point here is to shwo you how we use the functions of the package to produce a visualization of the outcome of our 100 coin tosses.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame for plotting</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>tosses_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Outcome =</span> <span class="fu">factor</span>(tosses, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Tails"</span>, <span class="st">"Heads"</span>))</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the results using ggplot2</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tosses_df, <span class="fu">aes</span>(<span class="at">x =</span> Outcome)) <span class="sc">+</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Occurrences of Heads and Tails"</span>,</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Outcome"</span>,</span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Count"</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01-lecture1_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It looks like every value occurred roughly 50 times but there is still quite some variation. Tail occured fewer times than Heads.</p>
<p>Maybe we have to give it another trial with more replications. With the computer we can do this with a fingertip. Let us roll our die 1000 times and plot the result.</p>
<p>Here is how we would code this by recycling the code used before.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>tosses <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="dv">1000</span>, <span class="fu">toss_coin</span>())</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame for plotting</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>tosses_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Outcome =</span> <span class="fu">factor</span>(tosses, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Tails"</span>, <span class="st">"Heads"</span>))</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the results using ggplot2</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tosses_df, <span class="fu">aes</span>(<span class="at">x =</span> Outcome)) <span class="sc">+</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Occurrences of Heads and Tails"</span>,</span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Outcome"</span>,</span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Count"</span></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01-lecture1_files/figure-html/1000-coin-tosses-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now it looks much better: Each face comes up approximately 500 times. We will learn in our course why the picture get better as we increase the number of rolls of the die. For the moment, let us just state that at least for this case it seems that there is no significant visual evidence that our virtual die is loaded.</p>
<p>But wait a minute. We have introduced the idea of classical probability by constructing equally probable cases and then count. Here we have repeated a random experiment over and over again to draw some conclusion on the underlying probabilities by visualizing the frequency polts of outcomes? These ideas are connected. We have just informally introduced a new idea in probability, the <strong>relative frequency notion</strong> of probability. How the two concepts are related and why this notion makes sense we will learn more formally in the next lecture. For the moment let’s just stick with the idea that practitioners have used at all times to assess probabilities by looking at frequencies of particular events occurring. When and why this kind of reasoning about probability works we learn in the next lecture.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip for R novices: How to leverage the LLM to enhance understanding
</div>
</div>
<div class="callout-body-container callout-body">
<p>Let me give you a hint here how you could use the LLM to enhance your learning experience in another way. The students usually taking this bootcamp class have very different backgrounds. Some have much experience with programming but perhaps not necessarily in R. Many of you will - for example - know Python, because most of the MQF is taught and run with Python. In such a case you could use the LLM to translate the R code into Python and then compare.</p>
<p>Or assume you are impatient and want to jump ahead by having somebody explaining you the ggplot2 code we used for the plotting function. Ask the LLM to explain you the R code and what it does, and I assure you you will get a pretty good and well explained answer.</p>
<p>Try it!</p>
</div>
</div>
</section>
<section id="getting_help" class="level3" data-number="1.2.10">
<h3 data-number="1.2.10" class="anchored" data-anchor-id="getting_help"><span class="header-section-number">1.2.10</span> Getting Help</h3>
<p>We have now learned a tiny number of R functions and we have written one function ourselves. We have learned how to make use of functions provided by packages.</p>
<p>It would be overwhelming to memorize and learn them all. In R, fortunately, every function comes with a detailed documentation and with its own help page. You need to learn how to use this source right from the beginning.</p>
<p>To access the help page of a function you type the function name preceded by a question mark at the prompt, like this</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>?sample</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, after you have pressed the return key, a help page is opened in the right lower pane under the help tab as shown in <a href="#fig-helpinr" class="quarto-xref">Figure&nbsp;<span>1.5</span></a></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-helpinr" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-helpinr-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/rhelp.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-helpinr-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.5: The Help-pane in RStudio
</figcaption>
</figure>
</div>
</div>
</div>
<p>This help page has a particular structure that you will find for every other R function no matter whether it is provided by the base installation or by a package. In the upper left corner you see the name of the function (<code>sample</code>) and in curly brackets next to it the term <code>base</code>, which means that this is a function in the R base installation. Then you see a headline about what the function does.</p>
<p>From the top of the page, you then first see the field <strong>Description</strong>. This is a short description what the function does. Here it says</p>
<pre><code>Description
sample takes a sample of the specified size from the elements of x using either with or without replacement.</code></pre>
<p>The next field is <strong>Usage</strong>. It gives you the function description with the arguments. Here for example</p>
<pre><code>Usage
sample(x, size, replace = FALSE, prob = NULL)

sample.int(n, size = n, replace = FALSE, prob = NULL,
           useHash = (!replace &amp;&amp; is.null(prob) &amp;&amp; size &lt;= n/2 &amp;&amp; n &gt; 1e7))
           </code></pre>
<p>The first line in Usage should by now be familiar. Don’t worry about the second line. The function can obviously do more than we know so far.</p>
<p>Next comes a list of arguments the function takes and what type of information R expects you to provide, as well as what R will do with this information. Here it says for example</p>
<pre><code>Arguments
x   
either a vector of one or more elements from which to choose, or a positive integer. See ‘Details.’

n   
a positive number, the number of items to choose from. See ‘Details.’

size    
a non-negative integer giving the number of items to choose.

replace 
should sampling be with replacement?

prob    
a vector of probability weights for obtaining the elements of the vector being sampled.

...
</code></pre>
<p>We omit some information here.</p>
<p>Then comes a field called <strong>Details</strong> which gives a more in-depth description of the function. The next field is called <strong>Value</strong>. It describes what the function returns when you run it. Then we have a reference to related R functions under the field <strong>See</strong>. Finally there is a field called <strong>Examples</strong>. This field contains example code that is guaranteed to work. It shows a couple of different cases how you can use the function in practice.</p>
</section>
</section>
<section id="coincidences" class="level2 page-columns page-full" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="coincidences"><span class="header-section-number">1.3</span> Application: Coincidences and the Blockchain</h2>
<section id="birthday_problem" class="level3 page-columns page-full" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="birthday_problem"><span class="header-section-number">1.3.1</span> The birthday problem</h3>
<p>In this section, we will apply our foundational knowledge of probability - which is at the moment just the informal and intuitive notion of counting equally probably cases - to a fascinating real-world problem known as the <em>birthday problem</em>:</p>
<p>The starting question in the birthday problem is: What is the probability that at least two people in a room share the same birthday, when we neglect things like leap years, and when we assume that birthdays on any day of the year are equiprobable and the birthdays of the people in the room are independent. We have no twins for example.</p>
<p>Perhaps some of you have already seen this problem before. If not, the result may surprise you. Even if you saw the birthday problem before, perhaps not many of you are aware that the significance of this problem reaches far beyond recreational math puzzles. This is because the birthday story is of course accidential. The mathematical formulation of the problem will reveal through the process of abstraction that this problem is at the heart a problem about the probability of coincidences. As such it has real world connections to cryptography and the blockchain security.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;We follow here the discussion in <span class="citation" data-cites="DiaconisSkyrms2019">Diaconis and Skyrms (<a href="#ref-DiaconisSkyrms2019" role="doc-biblioref">2019</a>)</span></p></div></div><p>Through this problem, we will:</p>
<ul>
<li>Explore how to frame probability questions mathematically.</li>
<li>Use basic R functions to compute probabilities.</li>
<li>Learn how to simulate experiments to approximate probabilities. This problem is not only an entertaining mathematical puzzle but also a stepping stone to understanding its applications in cryptography and blockchain security.</li>
</ul>
<p>First, observe that we took our assumptions such that we are in the frame of classical probability like the originators of the field thought about it.</p>
<p>Now for the sake of familiarizing ourselves with the new concepts, let us try to map the birthday problem into the probability notions we learned so far.</p>
<p>The <em>sample space</em> is the set of possible outcomes of the experiment. The sample space for our problem includes all possible combinations of birthdays for the group. For example, if there are 3 people, each with a birthday on any of 365 days, the sample space contains all possible sequences of three birthdays:</p>
<p><span class="math inline">\((1,1,1),(1,1,2),…,(365,365,365)\)</span></p>
<p>In general, for <span class="math inline">\(n\)</span> people, there are <span class="math inline">\(365^n\)</span> possible combinations, as each person’s birthday is independent of the others.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;Mathematically you can describe the sample space for the birthday problem as a set with <span class="math inline">\(365^n\)</span> ordered <span class="math inline">\(n\)</span>-tuples or sequences of birthdays: <span class="math inline">\({\cal S} = \{x | x \in 365^n \}\)</span> This is the sample space of this experiment, written as in set theoretic notation. It means the sample space is the set of all ordered <span class="math inline">\(n-tuples\)</span> from the Cartesian product <span class="math inline">\(365^n\)</span>. Remember that in mathematics, a Cartesian product is a mathematical operation that returns a set (or product set or simply product) from multiple sets (in this case the sample space, <span class="math inline">\({\cal S}\)</span>. That is, for sets <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, the Cartesian product <span class="math inline">\(A \times B\)</span> is the set of all ordered pairs <span class="math inline">\((a,b)\)</span> where <span class="math inline">\(a \in A\)</span> and <span class="math inline">\(b \in B\)</span>.</p></div></div><p>Now given this sample space we can assign a probability to the event that two people chosen at random will have the same birthday. The denominator will this be <span class="math inline">\(365^n\)</span>. The nominator for this probability will be much more straightforward to figure out, if we compute the complement. We discussed before that the probability of the complement of an event is 1 minus the probability of the event: <span class="math inline">\(P(\text{not} A) = 1 - P(A)\)</span>.</p>
<p>Let <span class="math inline">\(A\)</span> denote the event that no two people share the same brithday. We can then use the complement rule to compute the probability of at least two people sharing a birthday: Compute the probability that no two people share a birthday. Subtract this probability from 1 to get the probability of at least one match.</p>
<p>Here’s how we compute the probability of no matches:</p>
<ol type="1">
<li>The first person can have any birthday <span class="math inline">\((365/365)\)</span>.</li>
<li>The second person must avoid the first person’s birthday <span class="math inline">\((364/365)\)</span>.</li>
<li>The third person must avoid the first two birthdays <span class="math inline">\((363/365)\)</span>.</li>
</ol>
<p>Now continue this reasoning for <span class="math inline">\(n\)</span> people.</p>
<p>The final probability is:</p>
<p><span class="math display">\[\begin{equation*}
P(\text{at least two people share birthday}) =
1 - \frac{365 \times 364 \times 363 \cdots \times 365 - n +1}{365^n}
\end{equation*}\]</span></p>
<p>Now there is an additional thing we did not yet introduce and which we will learn about in the next lecture. This refers to our assumption that the individual birthdays are independent. For the moment you need to take the following fact on faith: The probability of independent events is the product of the probability these events.</p>
<p>Now comes the surprise for those of you who did not already see the birthday problem. Assume the group size of people is 23. Let us compute the birthday coincidence probability. For this computation we make use of the R function <code>prod()</code> which takes a vector of numbers as input and computes their product. For <span class="math inline">\(n=23\)</span> we need the list of numbers from 365 to 343. Now we can use the <code>:</code> operator and take advantage from one of its cool properties. If we formulate the command as <code>365:343</code> then the colon operator will give us a descending list of integers starting at 365 and ending at 343. Then the probability can be computed as</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">-</span> <span class="fu">prod</span>(<span class="dv">365</span><span class="sc">:</span><span class="dv">343</span>)<span class="sc">/</span><span class="dv">365</span><span class="sc">^</span><span class="dv">23</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5072972</code></pre>
</div>
</div>
<p>We have used the operator <code>^</code> which is needed to compute powers. Now we see from our computation that with 23 people the probability is already larger than 50 %. Quite stunning. You can now verify yourself that with 50 people this probability is already at 97 %.</p>
<p>Let’s visualize how the probability of at least one shared birthday grows with the size of the group. This time I will use base R’s plotting functionality and not use the <code>ggplot2</code> package.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn6"><p><sup>6</sup>&nbsp;I used <code>ggplot2</code> before to explain the concept of a package and how to load it to enhance R’s functionality. Base R containts a lot of powerful plotting functions which work independently of <code>gglot2</code>.</p></div></div><p>The plot below shows that the probability exceeds 50% with just 23 people and quickly approaches 100% as the group size increases.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the birthday_collisions function</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>birthday_collisions <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span> <span class="sc">-</span> <span class="fu">prod</span>(<span class="dv">365</span><span class="sc">:</span>(<span class="dv">365</span> <span class="sc">-</span> n <span class="sc">+</span> <span class="dv">1</span>)) <span class="sc">/</span> <span class="dv">365</span><span class="sc">^</span>n</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate data for group sizes</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>group_sizes <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>collision_probs <span class="ot">&lt;-</span> <span class="fu">sapply</span>(group_sizes, birthday_collisions)</span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the probability of at least one shared birthday</span></span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(group_sizes, collision_probs, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">lwd =</span> <span class="dv">2</span>,</span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Group Size"</span>, <span class="at">ylab =</span> <span class="st">"Collision Probability"</span>,</span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Probability of At Least One Shared Birthday"</span>)</span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)  <span class="co"># Highlight the 50% threshold</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01-lecture1_files/figure-html/visualize-brithday-problem-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I will not go in detail into the explanation of the code at this stage. For those of you who crave for an explanation, please look at the marginal note here or use the LLM for a step by step explanation.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn7"><p><sup>7</sup>&nbsp;<code>birthday_collisions</code> Function: This function calculates the probability of at least one shared birthday for a group of nn people using the formula derived earlier. <code>group_sizes</code> and <code>collision_probs</code>: <code>group_sizes</code> defines a range of group sizes (1 to 50). <code>sapply</code> applies the <code>birthday_collisions</code> function to each group size, computing the collision probabilities. Visualization: A line plot (<code>type = "l"</code>) is used to visualize how the collision probability increases with group size. A horizontal red dashed line (<code>abline</code>) highlights the 50% threshold for better visual context.</p></div></div></section>
<section id="determining-birthday-collisions-by-simulation" class="level3" data-number="1.3.2">
<h3 data-number="1.3.2" class="anchored" data-anchor-id="determining-birthday-collisions-by-simulation"><span class="header-section-number">1.3.2</span> Determining birthday collisions by simulation</h3>
<p>Instead of deriving the probability analytically, we can simulate the birthday experiment if we use the relative frequency notion of probability which we informally had used in our visualization of coin tosses. Here’s how:</p>
<ol type="1">
<li>Generate random birthdays for nn people using <code>sample(1:365, n, replace = TRUE)</code>.</li>
<li>Count how often at least two people share a birthday using the <code>duplicated() function</code>in combination with the logical function <code>any()</code>.</li>
<li>Repeat the simulation many times (e.g., 10,000) using replicate() to estimate the probability.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>sim_birthday <span class="ot">&lt;-</span> <span class="cf">function</span>(n, <span class="at">trials =</span> <span class="dv">10000</span>) {</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  results <span class="ot">&lt;-</span> <span class="fu">replicate</span>(trials, {</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">365</span>, n, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">any</span>(<span class="fu">duplicated</span>(birthdays))</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(results)</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let me give a step-by-step breakdown of this piece of code.</p>
<ol type="1">
<li><strong>Defining the Function</strong>:</li>
</ol>
<p>The function <code>sim_birthday</code> has two arguments</p>
<ul>
<li><code>n</code>: The number of people in the room (group size).</li>
<li><code>trials</code>: The number of simulation repetitions (default is 10,000). These parameters allow us to customize the simulation for different group sizes and levels of precision.</li>
</ul>
<ol start="2" type="1">
<li><p><strong>Using <code>replicate</code> to Run Simulations</strong>:</p>
<p>The <code>replicate()</code> function repeats an experiment a specified number of times (<code>trials</code>). Each experiment simulates one instance of <span class="math inline">\(n\)</span> people in a room.</p></li>
<li><p><strong>Simulating Birthdays</strong>:</p>
<p>The <code>sample()</code> function generates <span class="math inline">\(n\)</span> random birthdays (integers between 1 and 365) with replacement, representing the assumption that birthdays are independent and uniformly distributed. This step directly reflects the assumptions made in the analytical solution:</p>
<ul>
<li>The sample space consists of 365 possible birthdays.</li>
<li>Sampling is done with replacement because multiple people can share the same birthday.</li>
</ul></li>
<li><p><strong>Checking for Duplicates</strong>:</p>
<p>The <code>duplicated()</code> function identifies repeated birthdays in the sample. The <code>any()</code> function checks if there is at least one duplicate. If duplicates exist, this corresponds to a “birthday collision.” This step operationalizes the concept of finding the complement (at least one collision) rather than calculating the probability of all unique birthdays.</p></li>
<li><p><strong>Calculating the Probability</strong>:</p>
<p>The <code>results</code> vector contains <code>TRUE</code> (collision occurred) or <code>FALSE</code> (no collision) for each trial. Taking the <code>mean()</code> of this logical vector calculates the proportion of trials with a collision, which corresponds to the simulated probability. This step ties back to the definition of relative frequency probability introduced earlier: the probability of an event is the ratio of favorable outcomes to the total number of trials.</p></li>
</ol>
<p>This step requires some explanation of how R uses data types. We will learn about this more systematically in the next lecture. Here I give a quick and superficial explanation. R can force logical data types automatically to a numerical type when it applies arithmetic functions to a logical vector, forcing <code>TRUE</code> to 1 and <code>FALSE</code> to 0. Now, when you take the average (<code>mean()</code>) of a vector containing only 1 and 0 values you will get the proportion of 1’s or <code>TRUE</code> values. We will use such tricks often during the course of the lecture. For the moment I ask you to bear with this quick and superficial explanation of why this way of proceeding does what we want.</p>
<p>Let’s compute the birthday collision probability for 23 (as in our analytical solution) and 50 people:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sim_birthday</span>(<span class="dv">23</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5111</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sim_birthday</span>(<span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9718</code></pre>
</div>
</div>
<ul>
<li>For <span class="math inline">\(n = 23\)</span>, the output should be close to the analytically derived probability <span class="math inline">\(\approx 0.507\)</span>.</li>
<li>For <span class="math inline">\(n = 50\)</span>, the output should approximate <span class="math inline">\(\approx 0.970\)</span>.</li>
</ul>
<p>What are the advantages of simulations. Here are three main advantages:</p>
<ul>
<li><strong>Flexibility</strong>: This method works even when the assumptions (e.g., uniformity or independence) are adjusted.</li>
<li><strong>Verification</strong>: We can confirm analytical results with experimental data.</li>
<li><strong>Real-World Application</strong>: Simulation methods are widely used in practice when exact formulas are unavailable or complex.</li>
</ul>
<p>By understanding and applying this simulation, you now have a practical tool to explore probability problems beyond purely mathematical derivations.</p>
<p>The birthday problem has practical implications beyond recreational math. In cryptography, the same underlying principles are used to analyze the likelihood of hash collisions in blockchain systems and digital signatures. Let’s explore this connection further.</p>
</section>
<section id="hashfunctions" class="level3 page-columns page-full" data-number="1.3.3">
<h3 data-number="1.3.3" class="anchored" data-anchor-id="hashfunctions"><span class="header-section-number">1.3.3</span> Hash-functions and the blockchain</h3>
<p>The birthday problem provides the foundation for studying coincidences in various contexts. A critical application is in cryptography, where the concept of <strong>hash functions</strong> relies on similar probabilistic principles to ensure data security.</p>
<p>A hash function is a mathematical tool that converts an input (e.g., a text, file, or number) of any size into a fixed-length output, often called a “hash value” or “digest.” For example, the widely used hash function SHA-256 maps its input to a 256-bit string. You can think of this hash value as a digital fingerprint: any change to the input, no matter how small, results in a completely different hash.</p>
<p>Hash functions have two critical properties that make them essential in cryptography:</p>
<ol type="1">
<li><strong>One-wayness</strong>: It is computationally unfeasible to determine the original input from the hash value. A hash function is easy to evaluate or compute but it is practically impossible to learn from the value the initial argument by computing the inverse.</li>
<li><strong>Collision resistance</strong>: It is highly unlikely for two different inputs to produce the same hash value.</li>
</ol>
<p>If the range of the hash-function is <span class="math inline">\(M\)</span> and the hash-function maps into a 256 bit string then there are <span class="math inline">\(2^{256}\)</span> basic outcomes. Since the hash-function maps a large string onto a smaller string it is possible that there are two different strings <span class="math inline">\(x \neq y\)</span> mapping to the same value <span class="math inline">\(\text{hash}(x)=\text{hash}(y)\)</span>. This would be a problem for message authentication because it would give the same “fingerprint” for two different strings.</p>
<p>For a cryptographically secure hash function it is therefore required that the probability of such a collision should be small enough to exclude a collision in all practically relevant circumstances.</p>
<p>The collision problem for hash functions is analogous to the birthday problem. Instead of asking how many people are needed in a room for a shared birthday, we ask: how many inputs (e.g., messages or files) need to be hashed before two of them produce the same hash value? This probability depends on the size of the hash space, which is determined by the number of bits<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> in the hash function’s output.</p>
<div class="no-row-height column-margin column-container"><div id="fn8"><p><sup>8</sup>&nbsp;A bit, short for binary digit, is defined as the most basic unit of data in telecommunications and computing. Each bit is represented by either a 1 or a 0</p></div></div><p>Let <span class="math inline">\(M = 2^{256}\)</span> the number of possible hash values. The probability of no collisions after <span class="math inline">\(n\)</span> hashes is</p>
<p><span class="math display">\[\begin{equation*}
P_{nc}(n) = 1 \times \left(1 - \frac{1}{M}\right)\times
\left(1 - \frac{2}{M} \right) \times \cdots \times \left(1 - \frac{(n-1)}{M} \right)
\end{equation*}\]</span></p>
<p>For <span class="math inline">\(n\)</span> large this probability can be approximated by a factorial expansion as <span class="math display">\[\begin{equation*}
P_{nc}(n) \approx \prod_{k=0}^{n-1} \left( 1 - \frac{k}{M} \right)
\end{equation*}\]</span></p>
<p>Now convert the product into a sum using the natural logarithm: <span class="math display">\[\begin{equation}
\ln P_{nc}(n) \approx \sum_{k=0}^{n -1} \ln \left( 1 - \frac{k}{M} \right)
\end{equation}\]</span></p>
<p>Now to do the estimation of the threshold we use an approximation, which works with a simple property of the logarithm: <span class="math inline">\(\log(1-x)\approx -x\)</span> when <span class="math inline">\(x\)</span> is small. Thus for <span class="math inline">\(n\)</span> much smaller than <span class="math inline">\(M\)</span>, or <span class="math inline">\(n \ll M\)</span>, we can write the no-collision probability as <span class="math display">\[\begin{equation*}
\ln P_{nc}(n) \approx - \sum_{k=0}^{n-1} \frac{k}{M}
\end{equation*}\]</span> Simplify the summation by usin the fact that <span class="math inline">\(\sum_{k=0}^{n-1} = \frac{n(n-1)}{2}\)</span> we get <span class="math display">\[\begin{equation*}
\ln P_{nc}(n) \approx -\frac{n(n-1)}{2\, M}
\end{equation*}\]</span> By taking exponentials on both sides this gives us <span class="math display">\[\begin{equation*}
P_{nc}(n) \approx \exp \left( - \frac{n(n-1)}{2 \, M} \right)
\end{equation*}\]</span></p>
<p>Thus the probability of a hash-collision as a function of <span class="math inline">\(n\)</span> is then approximately</p>
<p><span class="math display">\[\begin{equation*}
P_{c}(n) = 1- P_{nc}(n) \approx \frac{n^2}{M}
\end{equation*}\]</span></p>
<p>Let’s try a visualization to show how <span class="math inline">\(P_{c}(n)\)</span> increases with <span class="math inline">\(n\)</span>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>M <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">^</span><span class="dv">256</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>collision_prob <span class="ot">&lt;-</span> (n<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> M)</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(n, collision_prob, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">log =</span> <span class="st">"y"</span>, <span class="at">col =</span> <span class="st">"blue"</span>,</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Number of Inputs (n)"</span>, <span class="at">ylab =</span> <span class="st">"Collision Probability (log scale)"</span>,</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Hash Collision Probability (SHA-256)"</span>)</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">lty =</span> <span class="dv">2</span>)  <span class="co"># 50% threshold</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="01-lecture1_files/figure-html/hash-collisions-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>These results show that for SHA-256:</p>
<ul>
<li>To have a <span class="math inline">\(50\)</span>% chance of a collision, an attacker would need to compute approximately <span class="math inline">\(2^{128}\)</span> hashes.</li>
<li>At <span class="math inline">\(10000\)</span> hashes per second, this would take longer than the age of the universe.</li>
</ul>
<p>This enormous computational difficulty ensures the security of modern cryptographic systems. Even with the combined computing power of all devices on Earth, finding a collision is practically impossible.</p>
<p>The birthday problem demonstrates how fundamental probability concepts can inform critical applications like cryptographic hash functions. By understanding the collision probabilities, we see why hash functions like SHA-256 are effective for ensuring data integrity and security.</p>
</section>
</section>
<section id="summary" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="summary"><span class="header-section-number">1.4</span> Summary</h2>
<p>In this lecture we have taken a first step towards some very basic probability notions and some basic steps in R. Isn’t it amazing how much territory we could cover with so few concepts? You have learned about how to think probabilistically about collision probabilities and how to solve for them analytically, by simulation and for large numbers by approximation.</p>
<p>We have convinced ourselves using this knowledge only and taking on faith that the probability of independent events is the product of their individual probabilities, that the cryptographic Hash-function SHA-256, while it can produce collisions in theory, practically the number of hashes to make such a collision occur would be so large that we can be confident that hashing bit strings with SHA-256 gives us a unique fingerprint practically with certainty.</p>
<p>These are the basic <strong>probability concepts</strong> we have covered in this lecture:</p>
<ol type="1">
<li>A <strong>random experiment</strong>: A process leading to an uncertain outcome.</li>
<li><strong>Sample space</strong>: The collection of all possible outcomes of a random experiment.</li>
<li><strong>Basic outcome</strong>: A possible outcome of a random experiment.</li>
<li><strong>Event</strong>: An event is a subset of basic outcomes. Any event which contains a single outcome is called a simple event.</li>
<li><strong>Classical probability</strong> find or make equally probably cases and the count them. The probability of an event <span class="math inline">\(A\)</span> is the number of cases when <span class="math inline">\(A\)</span> occurs divided by the total number of cases.</li>
<li><strong>Relative frequency probability</strong> defined as the number of times an event <span class="math inline">\(A\)</span> occurs in a repeated number of trials divided by the total number of trials in a random experiment.</li>
</ol>
<p>These are the <strong>R concepts</strong> we have covered in this lecture:</p>
<ol type="1">
<li><strong>objects</strong> arbitrary names that can store different values and data types.</li>
<li><strong>functions</strong> ab R object that can accept other R objects as arguments, operate on them and return a new object.</li>
<li><strong>scripts</strong> files that store sequences of R commands and can be saved, repopened and allow the execution of commands.</li>
<li><strong>using packages</strong></li>
<li><strong>finding help</strong></li>
<li><strong>the functions sample and replicate</strong></li>
</ol>
<p>These are the <strong>Applications</strong> we have covered in the lecture:</p>
<ol type="1">
<li><strong>Constructing a coin on the computer and toss it an arbitrary number of times</strong></li>
<li><strong>The birthday problem and how to solve it analytically as well as through simulation</strong></li>
<li><strong>Extrapolating the birthday problem to analyze cryptographic collision resistance of hash-functions by using ideas from probability</strong></li>
</ol>
</section>
<section id="project-designing-transaction-identifyers-for-digital-payment-systems" class="level2 page-columns page-full" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="project-designing-transaction-identifyers-for-digital-payment-systems"><span class="header-section-number">1.5</span> Project: Designing transaction identifyers for digital payment systems</h2>
<section id="introduction-real-world-importance-of-unique-identifiers-in-finance" class="level3 page-columns page-full" data-number="1.5.1">
<h3 data-number="1.5.1" class="anchored" data-anchor-id="introduction-real-world-importance-of-unique-identifiers-in-finance"><span class="header-section-number">1.5.1</span> Introduction: Real-World Importance of Unique Identifiers in Finance</h3>
<p>In modern financial systems, every transaction is assigned a unique identifier, allowing stakeholders to track, verify, and manage transaction details efficiently. These identifiers are critical for maintaining transparency, accountability, and security across high-volume transaction systems. However, as the volume of transactions grows, the risk of identifier collisions—where two different transactions are assigned the same identifier—increases.</p>
<p>This issue is analogous to the birthday problem: as the number of transactions increases, the likelihood of collisions rises due to the combinatorial nature of the problem. A collision could result in processing errors or even security vulnerabilities, such as fraudulent transactions or misattribution of funds.</p>
<p>To mitigate such risks, many financial systems employ hash functions, such as the widely used SHA-256, to map data to a large space of possible outputs. These hash functions, with their vast output range (e.g., <span class="math inline">\(2^{256}\)</span>), make collisions extremely unlikely, even for billions of transactions. By understanding the principles behind collision probabilities, financial institutions can design systems that maintain transaction integrity even under high workloads.</p>
<p>In this project, we will explore this critical aspect of financial systems by simulating transaction identifiers and analyzing collision probabilities. This exercise demonstrates how theoretical probability concepts translate directly to practical challenges in computational finance.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn9"><p><sup>9</sup>&nbsp;For more information and details you might want to check this source: https://www.hostmerchantservices.com/articles/what-are-transaction-ids/?utm_source=chatgpt.com</p></div></div><p>In this project, you will:</p>
<ol type="1">
<li>Simulate a system assigning transaction identifiers.</li>
<li>Investigate the probability of identifier collisions under different scenarios.</li>
<li>Discuss implications for system design and security.</li>
</ol>
</section>
<section id="simulate-transaction-identifiers" class="level3" data-number="1.5.2">
<h3 data-number="1.5.2" class="anchored" data-anchor-id="simulate-transaction-identifiers"><span class="header-section-number">1.5.2</span> Simulate transaction identifiers</h3>
<ul>
<li>Write a function to simulate transaction identifiers, where each identifier is randomly chosen from a pool of size <span class="math inline">\(M\)</span> (e.g.&nbsp;<span class="math inline">\(M = 10^6\)</span> or <span class="math inline">\(M = 10^9\)</span>)</li>
<li>Using your function, simulate <span class="math inline">\(n\)</span> transactions and check for duplicates using R’s <code>duplicated()</code> function.</li>
</ul>
</section>
<section id="compute-collision-probabilities" class="level3" data-number="1.5.3">
<h3 data-number="1.5.3" class="anchored" data-anchor-id="compute-collision-probabilities"><span class="header-section-number">1.5.3</span> Compute collision probabilities</h3>
<ul>
<li>Simulate nn transactions multiple times and estimate the collision probability as the fraction of simulations with at least one collision.</li>
<li>Use this function to compute the collision probability for <span class="math inline">\(n = 10^3, n = 10^6, n = 10^9\)</span> and <span class="math inline">\(M = 10^6, M = 10^9\)</span></li>
</ul>
</section>
<section id="visualize-the-results" class="level3" data-number="1.5.4">
<h3 data-number="1.5.4" class="anchored" data-anchor-id="visualize-the-results"><span class="header-section-number">1.5.4</span> Visualize the results</h3>
<p>Plot the collision probability as a function of nn for different values of <span class="math inline">\(M\)</span>. We did not cover Rs plotting functions in the lecture so far. We only showed some examples which we did not explain. But we explained how you could research R’s help system and how you could ask an LLM for help. With any of these resources you should be able to come up with some reasonable visualization.</p>
</section>
<section id="investigate-the-system-design" class="level3" data-number="1.5.5">
<h3 data-number="1.5.5" class="anchored" data-anchor-id="investigate-the-system-design"><span class="header-section-number">1.5.5</span> Investigate the system design</h3>
<ul>
<li>Reflect on how the size of the pool <span class="math inline">\(M\)</span> influences the collision risk.</li>
<li>What happens when the transaction volume <span class="math inline">\(n\)</span> increases significantly?</li>
</ul>
</section>
<section id="financial-implications" class="level3" data-number="1.5.6">
<h3 data-number="1.5.6" class="anchored" data-anchor-id="financial-implications"><span class="header-section-number">1.5.6</span> Financial implications</h3>
<ul>
<li>Imagine a financial institution processing transactions with <span class="math inline">\(M=10^6\)</span> identifiers.</li>
<li>If the daily transaction volume grows to <span class="math inline">\(n=10^5\)</span>, what is the risk of a collision?</li>
<li>Discuss potential consequences of a collision (e.g., failed transactions, fraud risks) and propose ways to mitigate these risks (e.g., increasing <span class="math inline">\(M\)</span>, using hash functions).</li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-DiaconisSkyrms2019" class="csl-entry" role="listitem">
Diaconis, Persi, and Brian Skyrms. 2019. <em>10 Great Ideas about Chance</em>. Princeton University Press.
</div>
<div id="ref-Healy2018" class="csl-entry" role="listitem">
Healy, Kirean. 2019. <em>Data Visualization: A Practical Introduction</em>. Princeton University Press.
</div>
<div id="ref-WickhamGrolemund2017" class="csl-entry" role="listitem">
Wickham, Hadley, and Garrett Grolemund. 2017. <em>R for Data Science</em>. O’Reilly. <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>.
</div>
</div>
</section>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Preface">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Preface</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>